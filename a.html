<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>360åº¦èƒŒæ™¯ - æœˆå±±ï¼ˆé«˜ç”»è³ªç‰ˆï¼‰</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>
  html, body { margin: 0; height: 100%; overflow: hidden; background: black; }
</style>
</head>
<body>

<a-scene
  renderer="antialias: true; precision: highp; physicallyCorrectLights: true;"
  vr-mode-ui="enabled: true"
  xr-mode-ui="enabled: true"
>
  <!-- é«˜è§£åƒåº¦ã®360Â°ç”»åƒ -->
  <a-sky id="sky" src="gassan_8k.jpg" rotation="0 -90 0"></a-sky>

  <!-- è¦–ç‚¹ï¼ˆãƒ˜ãƒƒãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ»ãƒã‚¦ã‚¹å¯¾å¿œï¼‰ -->
  <a-entity id="camera" camera look-controls position="0 1.6 0"></a-entity>
</a-scene>

<script>
  document.querySelector('a-scene').addEventListener('loaded', () => {
    const skyEl = document.querySelector('#sky');
    const mesh = skyEl.getObject3D('mesh');

    if (mesh && mesh.material.map) {
      const texture = mesh.material.map;

      // ğŸ”¹ é«˜å“è³ªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è¨­å®š
      texture.anisotropy = 16;               // ç•°æ–¹æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆæœ€å¤§ï¼‰
      texture.minFilter = THREE.LinearFilter;
      texture.magFilter = THREE.LinearFilter;
      texture.encoding = THREE.sRGBEncoding; // æ­£ç¢ºãªè‰²è¡¨ç¾
      texture.needsUpdate = true;
    }

    // ğŸ”¹ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã®é«˜ç²¾ç´°è¨­å®š
    const renderer = document.querySelector('a-scene').renderer;
    if (renderer) {
      renderer.outputEncoding = THREE.sRGBEncoding;     // è‰²è£œæ­£
      renderer.toneMapping = THREE.ACESFilmicToneMapping; // æ˜ ç”»çš„ãƒˆãƒ¼ãƒ³
      renderer.toneMappingExposure = 1.1;
      renderer.setPixelRatio(Math.min(window.devicePixelRatio * 1.5, 3)); // Retinaè¶…è§£åƒ
    }
  });
</script>

</body>
</html>
