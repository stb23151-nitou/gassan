<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>360度背景 - 月山 (Vision Pro 安定版)</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>
  html, body { margin: 0; height: 100%; overflow: hidden; background: black; }
</style>
</head>
<body>

<a-scene
  renderer="antialias: true; precision: highp;"
  vr-mode-ui="enabled: true"
  xr-mode-ui="enabled: true"
>
  <!-- JPGまたはPNGでテスト -->
  <a-sky id="sky" src="gassan.jpeg" rotation="0 -90 0"></a-sky>

  <a-entity camera look-controls position="0 1.6 0"></a-entity>
</a-scene>

<script>
  document.querySelector('a-scene').addEventListener('loaded', () => {
    const skyEl = document.querySelector('#sky');
    const mesh = skyEl.getObject3D('mesh');
    if (mesh && mesh.material.map) {
      const texture = mesh.material.map;
      texture.anisotropy = 8; // 16でもOKだが安定性重視で8
      texture.needsUpdate = true;
    }

    const renderer = document.querySelector('a-scene').renderer;
    if (renderer) {
      renderer.outputEncoding = THREE.sRGBEncoding; // 正しい色空間
      renderer.setPixelRatio(window.devicePixelRatio); // 安定倍率
    }
  });
</script>

</body>
</html>
