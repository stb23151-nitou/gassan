<!DOCTYPE html> 
<!-- このページはHTML5で書かれていることをブラウザに伝える宣言 -->

<html lang="ja">
<!-- ページの言語を日本語（ja）に指定 -->

<head>
  <meta charset="utf-8">
  <!-- 文字コードをUTF-8に指定（日本語が文字化けしないように） -->

  <title>AR自動表示 (iPhone / Vision Pro)</title>
  <!-- ブラウザのタブや検索結果に表示されるページタイトル -->

  <style>
    /* ===== ページ全体のデザイン設定 ===== */
    html, body {
      margin: 0;                  /* ページの余白をなくす */
      height: 100%;               /* 画面全体の高さを使用 */
      display: flex;              /* 中央揃えのためにFlexboxを使用 */
      justify-content: center;    /* 横方向に中央配置 */
      align-items: center;        /* 縦方向に中央配置 */
      background-color: #f0f0f0;  /* 背景を薄いグレーに */
      font-family: sans-serif;    /* ゴシック体のようなフォント */
      text-align: center;         /* テキストを中央寄せ */
    }

    /* ===== メッセージ部分のスタイル ===== */
    #message {
      font-size: 1.2em;  /* 少し大きめの文字サイズ */
      color: #333;       /* 濃いグレーの文字色 */
    }

    /* ===== ARリンクボタンのスタイル ===== */
    #ar-link {
      display: inline-block;       /* ボタンのように扱うためのブロック要素化 */
      padding: 12px 20px;          /* 内側の余白（上下12px、左右20px） */
      margin-top: 15px;            /* 上に少し間を空ける */
      background-color: #007aff;   /* Apple風の青色 */
      color: white;                /* 文字色を白に */
      border-radius: 8px;          /* 角を丸くする */
      text-decoration: none;       /* 下線を消す */
      font-weight: bold;           /* 太字にする */
    }
  </style>
</head>

<body>

  <!-- ===== 画面中央に表示されるメッセージとARボタン ===== -->
  <div id="message">
    ARを起動中…<br>
    開かれない場合は下のボタンをタップしてください。<br>
    <!-- rel="ar" はiPhone / Vision ProでAR Quick Lookを起動する特別な属性 -->
    <a id="ar-link" href="3dbeni.usdz" rel="ar">ARで表示</a>
  </div>

  <!-- ===== JavaScript部分（自動起動制御） ===== -->
  <script>
    const ua = navigator.userAgent;               // 現在の端末やブラウザの情報を取得
    const isiOS = /iPad|iPhone|iPod/.test(ua);    // iOS端末ならtrue
    const isVisionPro = /Vision/i.test(ua);       // Vision Pro端末ならtrue
    const arLink = document.getElementById("ar-link"); // ARリンク要素を取得

    // ===== iPhone または Vision Pro の場合のみ実行 =====
    if (isiOS || isVisionPro) {
      // ページが完全に読み込まれたあと、自動的にARを起動する
      window.addEventListener("load", () => {
        setTimeout(() => {  // 少し待ってから実行（ロード完了を確実にするため）
          try {
            arLink.click(); // 自動でARリンクをクリック（Quick Lookを起動）
          } catch (e) {
            console.warn("自動起動失敗:", e); // エラー時はコンソールに警告を出す
          }
        }, 500); // 0.5秒後に実行
      });
    } else {
      // ===== iPhone / Vision Pro 以外のデバイス（例：Android, PC） =====
      document.getElementById("message").innerHTML =
        "このページは iPhone または Apple Vision Pro でご覧ください。";
        // メッセージ内容を対応デバイス用に書き換える

      arLink.style.display = "none";
      // 対応していない端末ではARボタンを非表示にする
    }
  </script>

</body>
</html>
